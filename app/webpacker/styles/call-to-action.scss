.call-to-action {
  background-color: $grey;
  padding: 0;
  margin-bottom: 2em;
  display: flex;

  @include mq($until: tablet) {
    flex-direction: column;
  }

  &__icon {
    background-color: $yellow;
    padding: 1em;
  }

  &__photo {
    > img {
      width: 8em;
    }
  }

  &--chat-online {
    display: none;
  }

  &.visible {
    display: flex;
  }

  &__content {
    padding: .5em 1em 1em;

    .call-to-action__heading,
    .call-to-action__text:first-child {
      margin-top: .6em;
    }
  }

  .call-to-action__heading {
    font-size: size("medium");
    font-weight: bold;
    margin-bottom: 1em;
  }

  &__action {
    margin: .5em 0;

    button,
    a {
      @include button;
      @include chevron;
      white-space: initial;

      display: inline-block;
    }

    .call-to-action__text {
      margin-bottom: .4em;
    }
  }

  &__button-row {
    display: flex;

    &__action {
      a {
        @include button;
        @include chevron;
        white-space: initial;
      }
    }

    .call-to-action__button-row__action + .call-to-action__button-row__action {
      margin-top: 0;
      margin-left: 1em;
    }

    @include mq($until: tablet) {
      flex-direction: column;

      .call-to-action__button-row__action + .call-to-action__button-row__action {
        margin-top: 1em;
        margin-left: 0;
      }
    }
  }

  // add some extra space between multiple actions
  .call-to-action__action + .call-to-action__action {
    margin-top: 2em;
  }

  &--narrow {
    display: flex;
    flex-direction: column;

    header {
      display: flex;
      align-items: center;

      .call-to-action__heading {
        font-size: size("small");
        margin: 0 .5em;
      }
    }
  }

  &--homepage {
    display: flex;
    flex-direction: row;
    margin-bottom: 0;

    .call-to-action {
      @include reset;

      // the icon__container is the container used
      // by flex to position the div
      &__icon__container {
        transform: rotate(-3deg);
      }

      // the box exists so we can rotate the icon's background
      // and the icon itself separately in opposite directions
      &__icon__box {
        margin: 1em auto auto -.2em;
        padding-left: .2em;
        background-color: $yellow;
        display: inline-block;
      }

      &__icon {
        background: transparent;
        transform: rotate(3deg);
      }

      &__heading {
        display: inline-block;
        padding: .5em;
        margin: .2em 0;

        font-size: size(medium);
        text-decoration: underline;
        text-underline-offset: .2em;
        line-height: 1.3em;
        text-decoration-thickness: .09em;
      }

      &__content {
        @include reset;

        flex: 1 0 50%;
        overflow: hidden;
      }

      &__image {
        flex: 1 0 50%;
        align-self: center;
        overflow: hidden;
        object-fit: cover;
        background-repeat: no-repeat;
        background-position: center;
        background-size: cover;
        width: 80%;
        height: 90%;
        @include mq($until: tablet) {
          display: none;
        }
      }

      &__action {
        margin: .2em .5em 1em;
      }
    }
  }
}
