$z-indices: ("bottom": 5, "low": 10, "medium": 15, "high": 20, "top": 25);

@mixin underline($thickness: .15em, $padding: .05em) {
  border-bottom: $thickness solid $black;
  padding-bottom: $padding;
}

.welcome-guide {
  max-width: $page-max-width;
  background-color: $grey;
  margin: 0 auto;

  img {
    display: block;
  }

  header {
    h1 { @include reset; }
  }

  // section-specific styles
  .landing {
    // LAYOUTS
    // grid-row-start grid-column-start grid-row-end grid-column-end
    @mixin welcome-to-teaching-layout {
      $mobile-overlap-amount: 2em;

      grid-template-columns: 1fr;
      grid-template-rows: max-content $mobile-overlap-amount max-content $mobile-overlap-amount 1em;

      .background { grid-area: 1 / 1 / 5 / 2; }
      h1 { grid-area: 1 / 1 / 2 / 2; }
      picture { grid-area: 2 / 1 / 4 / 2; }
      .triangle { grid-area: 5 / 1 / 6 / 2; }

      @include mq($from: desktop) {
        grid-template-rows: minmax(2em, max-content) 3em 4em 3em minmax(3em, max-content);
        grid-template-columns: 1fr 10em 1fr;

        .background { grid-area: 1 / 1 / 4 / 4; }
        .triangle { grid-area: 4 / 1 / 5 / 4; }
        h1 { grid-area: 1 / 1 / 3 / 3; }
        picture { grid-area: 2 / 2 / 6 / 4; }
      }
    }

    .welcome-container {
      max-width: 30em;
      margin: 0 auto;
    }

    // GENERAL STYLES
    &.welcome-to-teaching {
      @include welcome-to-teaching-layout;

      display: grid;

      .background {
        background: $yellow;
        z-index: map-get($z-indices, "bottom");
      }

      // stylelint-disable selector-type-no-unknown
      .triangle {
        margin-top: -.03em; // ensure there's never any gap when resizing

        &.yellow {
          svg {
            fill: $yellow;
            stroke: $yellow;
            stroke-width: 1;
          }
        }
      }
      // stylelint-enable selector-type-no-unknown

      * {
        z-index: map-get($z-indices, "medium");
      }

      h1 {
        @include font-size(xxxlarge);
        z-index: map-get($z-indices, "high");
        margin: .4rem 0 0 .4em;

        .underline {
          @include underline;
        }

        .caption {
          margin-top: 1rem;
        }

        .caption-l {
          @include font-size(xxxlarge);
        }

        .caption-m {
          @include font-size(xlarge);
        }

        .purple {
          padding: .3rem .6rem;
          background-color: $purple;
        }

        .no-wrap {
          white-space: nowrap;
        }

        .welcome-to-teaching {
          line-height: 1.2;

          .purple {
            padding-bottom: .5em;
          }
        }

        @include mq($from: desktop) {
          margin: 1rem 0 0 2em;
        }
      }

      picture {
        z-index: map-get($z-indices, "medium");

        img {
          width: 100%;
          max-height: 24em;
          object-fit: cover;
        }
      }
    }

    &.introduction {
      padding: 8em 0;

      p {
        font-weight: bold;
        margin: 1em 2em;
      }

      mark {
        background-color: $yellow;
        padding: 0 .2em;
      }
    }

    &.teaching-maths-is-so-rewarding {
      display: grid;

      h2,
      p {
        margin: 1rem;
      }

      h2 {
        @include font-size(xlarge);
        line-height: 1.7;

        .caption {
          display: inline-block;
        }
      }

      p {
        @include font-size(medium);
      }

      .pink {
        padding: .6rem;
        background-color: $pink;
      }

      .underline {
        @include underline($padding: 0, $thickness: .2em);
      }

      .section-number {
        @include mq($until: desktop) {
          display: none;
        }
      }
    }
  }
}
