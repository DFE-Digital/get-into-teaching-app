<% policy_id = GetIntoTeachingApiClient::PrivacyPoliciesApi.new.get_latest_privacy_policy.id %>

<%= form_with builder: GOVUKDesignSystemFormBuilder::FormBuilder, url: mailing_list_step_path(:name), scope: :mailing_list_steps_name, method: :put do |f| %>
  <%= f.govuk_text_field :first_name, width: 'two-thirds', autocomplete: "given-name" %>
  <%= f.govuk_text_field :last_name, width: 'two-thirds', autocomplete: "family-name" %>
  <%= f.govuk_email_field :email, width: 'two-thirds', autocomplete: "email" %>
  <%= f.hidden_field :accepted_policy_id, value: policy_id %>

  <p>Your details are protected under the terms of our <%= link_to("privacy notice", privacy_policy_path(id: policy_id), { target: :blank }) %>.</p>

  <% button_text = "Next step <span></span>" %>
  <%= f.button button_text, class: "call-to-action-button button", data: { "prevent-double-click": true, "disable-with": button_text } %>
<% end %>
